<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title th:text="${pageTitle}">Manajemen Tugas Akhir</title>
 <script src="https://cdn.tailwindcss.com"></script>
 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 font-sans h-screen">
<div class="flex h-full">
 <!-- Sidebar -->
 <aside th:replace="~{kta/fragments/sidebar :: sidebar}"></aside>

     <!-- Main Content -->
     <main class="flex-1 p-6">
          <div class="max-w-4xl mx-auto">
               <div class="flex justify-between items-center mb-6">
                    <h1 class="text-3xl font-bold" th:text="${pageTitle}">Manajemen Tugas Akhir</h1>
                    <a th:href="@{/kta/tugas-akhir}" class="text-purple-600 hover:text-purple-800">‚Üê Kembali</a>
                </div>
         <form th:action="@{/kta/tugas-akhir/save}" method="post" class="bg-white rounded-xl shadow-lg p-8" th:object="${tugasAkhir}">
             <input type="hidden" th:field="*{taId}" />

              <!-- Mahasiswa -->
           <div class="mb-4">
             <label for="mahasiswaId" class="block text-gray-700 font-medium mb-2">Mahasiswa</label>
             <select id="mahasiswaId" th:field="*{mahasiswa.mahasiswaId}" 
               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-1 focus:ring-purple-500" required>
             <option value="">Pilih Mahasiswa</option>
              <option th:each="mahasiswa : ${mahasiswaList}" th:value="${mahasiswa.mahasiswaId}" th:text="${mahasiswa.nama} + ' (' + ${mahasiswa.npm} + ')' "
                 th:selected="${tugasAkhir.mahasiswa != null && tugasAkhir.mahasiswa.mahasiswaId == mahasiswa.mahasiswaId}">
               </option>
           </select>
         </div>

             <!-- Semester -->
              <div class="mb-4">
                 <label for="semesterId" class="block text-gray-700 font-medium mb-2">Semester</label>
                   <select id="semesterId" th:field="*{semester.semesterId}"
                             class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-1 focus:ring-purple-500" required>
                        <option value="">Pilih Semester</option>
                        <option th:each="semester : ${semesterList}" th:value="${semester.semesterId}"
                                th:text="${semester.tahunAjaran} + ' ' + ${semester.periode}"
                                th:selected="${tugasAkhir.semester != null && tugasAkhir.semester.semesterId == semester.semesterId}">
                          </option>
                        </select>
                   </div>
                <!-- Judul -->
                 <div class="mb-4">
                     <label for="judul" class="block text-gray-700 font-medium mb-2">Judul</label>
                     <input type="text" id="judul" th:field="*{judul}" required 
                            class="border border-gray-300 rounded-md w-full px-4 py-2 focus:border-purple-500 focus:ring-1 focus:ring-purple-500">
                 </div>
                 <!-- Topik -->
                <div class="mb-4">
                   <label for="topik" class="block text-gray-700 font-medium mb-2">Topik</label>
                   <input type="text" id="topik" th:field="*{topik}" required
                         class="border border-gray-300 rounded-md w-full px-4 py-2 focus:border-purple-500 focus:ring-1 focus:ring-purple-500">
                  </div>

                 <div class="mb-4">
                     <label class="block text-gray-700 font-medium mb-2">Pembimbing</label>
                     <th:block th:each="dosen : ${dosenList}">
                         <label class="inline-flex items-center">
                             <input type="checkbox" name="pembimbingIds" th:value="${dosen.dosenId}" 
                                    class="form-checkbox h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-2 focus:ring-purple-500"
                                    th:checked="${tugasAkhir.pembimbing != null && tugasAkhir.pembimbing.contains(dosen)}">
                             <span class="ml-2 text-sm text-gray-700" th:text="${dosen.nama}">Dosen Name</span>
                         </label>
                         <br>
                      </th:block>
                 </div>


                 <!-- Jenis TA -->
                 <div class="mb-4">
                     <label for="jenisTA" class="block text-gray-700 font-medium mb-2">Jenis TA</label>
                    <select id="jenisTA" th:field="*{jenisTA}"
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-1 focus:ring-purple-500" required>
                         <option value="">Pilih Jenis TA</option>
                          <option th:each="jenis : ${jenisTAList}" th:value="${jenis}"
                             th:text="${#strings.capitalize(#strings.toLowerCase(jenis))}">
                         </option>
                       </select>
                 </div>


                 <!-- Status TA -->
                 <div class="mb-6">
                     <label for="status" class="block text-gray-700 font-medium mb-2">Status TA</label>
                     <select id="status" th:field="*{status}"
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-1 focus:ring-purple-500" required>
                         <option value="">Pilih Status TA</option>
                         <option th:each="status : ${statusTAList}" th:value="${status}"
                            th:text="${#strings.capitalize(#strings.toLowerCase(status))}">
                       </option>
                       </select>
                 </div>
                 <div class="flex justify-end gap-4">
                     <a th:href="@{/kta/tugas-akhir}" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Batal</a>
                     <button type="submit" class="bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">
                          Simpan
                     </button>
                 </div>
             </form>
         </div>
     </main>
 </div>
</body>
</html>